<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <!-- For Resposive Device -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- For IE -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Aggregation</title>


  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="56x56" href="images/them-logo/favicon.png">

  <!-- Main style sheet -->
  <link rel="stylesheet" href="css/style.css">
  <!-- responsive style sheet -->
  <link rel="stylesheet" href="css/responsive.css">

  <!-- Fix Internet Explorer ______________________________________-->

  <!--[if lt IE 9]>
			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
			<script src="vendor/html5shiv.js"></script>
			<script src="vendor/respond.js"></script>
		<![endif]-->
</head>

<body>

  <div class="main-page-wrapper">
    <!-- Theme Main Menu ____________________________ -->
    <section class="b-seo-menu-wrapper">
      <div class="theme-main-menu">
        <div class="container">
          <div class="main-menu clear-fix">

            <div class="float-right search-button-content">
              <div class="clear-fix">
                <!-- /.search-box -->
                <a id='login-button' href="/login.html" class="menu-button a-comon hvr-bounce-to-right">Login</a>
              </div>
              <!-- /.right-content -->
            </div>
            <div class="them-logo float-left">
              <a href="/index.html">
                <h3 class="gradient-title">Best2Buy</h3>
              </a>
            </div>

            <!-- Menu -->
            <nav class="navbar">
              <!-- Brand and toggle get grouped for better mobile display -->
              <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed tran3s" data-toggle="collapse" data-target="#navbar-collapse-1" aria-expanded="false">
										<span class="sr-only tran3s">Toggle navigation</span>
										<span class="icon-bar tran3s"></span>
										<span class="icon-bar tran3s"></span>
										<span class="icon-bar tran3s"></span>
									</button>
              </div>

              <!-- Collect the nav links, forms, and other content for toggling -->
              <div class="collapse navbar-collapse" id="navbar-collapse-1">
                <ul class="nav navbar-nav">
                  <li><a href="index.html">Home</a></li>
                  <li><a href="products.html">Products</a></li>
                  <li><a href="stores.html">Stores</a></li>
                  <li><a href="aggregation.html">Aggregation</a></li>
                  <li><a href="profile.html">Profile</a></li>
                </ul>
              </div>
              <!-- /.navbar-collapse -->
            </nav>
          </div>
          <!-- / menu-skew-div -->
        </div>
        <!-- /.container main-menu -->
      </div>
      <!-- /.main-menu -->
    </section>
    <!-- /.b-seo-menu-wrapper -->

    <!-- Theme Inner Banner ____________________________ -->
    <section class="short-theme-banner">
      <div class="inner-banner-opacity">
        <div class="container">
          <div class="inner-banner-title">
            <h1>Aggregation</h1>
            <ul>
              <li><a href="index.html">Home</a></li>
              <li><span><i class="fa fa-arrow-right" aria-hidden="true"></i></span></li>
              <li><a href="#">Aggregation</a></li>
            </ul>
          </div>
          <!-- /.inner-banner-title -->
        </div>
        <!-- /.container -->
      </div>
      <!-- /.inner-banner-opact -->
    </section>
    <!-- /.them-inner-banner -->

    <!-- Product Rank _________________________________ -->
    <section class="Services-Packages">
        <div class="container">
            <div class="theme-title text-center">
                <h2>Our most <span>popular</span> products</h2>
                <span class="titleanimi"></span>
            </div>
            <!-- /.theme-title -->
            <div class="services-item-wrapper" id="productRank">
                <!-- / #services-packages-slider -->
                <div class="rankContent">There is no data now</div>
                <a href="/products.html" class="a-comon">Explore More <span class="button-style One"></span></a>
            </div>
            <!-- /.services-item-wrapper -->
        </div>
        <!-- /.container -->
    </section>
    <!-- /.Product Rank -->

    <!-- Category Rank _________________________________ -->
    <section class="Services-Packages">
        <div class="container">
            <div class="theme-title text-center">
                <h2>Our most <span>popular</span> product categories</h2>
                <span class="titleanimi"></span>
            </div>
            <!-- /.theme-title -->
            <div class="services-item-wrapper" id="kindRank">
                <!-- / #services-packages-slider -->
                <div class="rankContent">There is no data now</div>
                <a href="/products.html" class="a-comon">Explore More <span class="button-style One"></span></a>
            </div>
            <!-- /.services-item-wrapper -->
        </div>
        <!-- /.container -->
    </section>
    <!-- /.Category Rank -->

    <!-- Region Rank _________________________________ -->
    <section class="Services-Packages">
        <div class="container">
            <div class="theme-title text-center">
                <h2>Our most <span>popular</span> product categories</h2>
                <span class="titleanimi"></span>
            </div>
            <!-- /.theme-title -->
            <div class="services-item-wrapper" id="regionRank">
                <!-- / #services-packages-slider -->
                <div class="rankContent">There is no data now</div>
                <a href="/regions.html" class="a-comon">Explore More <span class="button-style One"></span></a>
            </div>
            <!-- /.services-item-wrapper -->
        </div>
        <!-- /.container -->
    </section>
    <!-- /.Region Rank -->

    <!-- Footer ____________________________ -->
    <footer>
    </footer>
    <!-- /footer -->

  </div>
  <!-- /.main-page-wrapper -->


  <!-- Scroll Top Button -->
  <button class="scroll-top tran7s p-color-bg">
			<i class="fa fa-angle-up" aria-hidden="true"></i>
		</button>
  <!-- / Scroll Top Button -->

  <!-- pre loader  -->
  <div id="loader-wrapper">
    <div id="loader"></div>
  </div>
  <!-- / pre loader -->



  <!-- js file -->
  <!-- Main js file/jquery -->
  <script src="vendor/jquery-2.2.3.min.js"></script>
  <!-- bootstrap-select.min.js -->
  <script src="vendor/bootstrap-select-1.10.0/dist/js/bootstrap-select.min.js"></script>
  <!-- bootstrap js -->
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  <!-- camera js -->
  <script src="vendor/Camera-master/scripts/camera.min.js"></script>
  <script src="vendor/Camera-master/scripts/jquery.easing.1.3.js"></script>
  <!-- Owl carousel -->
  <script src="vendor/OwlCarousel2/dist/owl.carousel.min.js"></script>
  <!-- appear & countTo -->
  <script src="vendor/jquery.appear.js"></script>
  <script src="vendor/jquery.countTo.js"></script>
  <!-- fancybox -->
  <script src="vendor/fancybox/dist/jquery.fancybox.min.js"></script>
  <!-- video -->
  <script src="vendor/fancybox/jquery.fancybox.pack.js"></script>
  <!-- img -->
  <!-- Gallery - isotop -->
  <script type="text/javascript" src="vendor/isotope.pkgd.min.js"></script>
  <!-- WOW js -->
  <script type="text/javascript" src="vendor/WOW-master/dist/wow.min.js"></script>
  <!-- Circle Progress -->
  <script type="text/javascript" src="vendor/circle-progress.js"></script>
  <!-- Style js -->
  <script src="js/jquery.cookie.js"></script>
  <script src="js/custom.js"></script>
  <script src="js/main.js"></script>
  <script type='text/javascript'>
        function updateKindRank(kind) {
            const rankItemList = [];
            for(let i=1;i<Math.min(4,kind.length+1); i++) {
                const rankItem  = `
                    <div class="services-item col-md-4">
                        <div class="services-img">
                            <img src="https://m.media-amazon.com/images/I/61+wn86fYMS._AC_UL640_FMwebp_QL65_.jpg" alt="">
                            <div class="">
                                <img src="" alt="">
                                <h5><a href="#">${kind[i-1]["ProductKind"]}</a></h5>
                            </div>
                        </div>
                        <div class="services-text text-center">
                            <h6>0${i}</h6>
                            <h5>${kind[i-1]["ProductKind"]}</h5>
                        </div>
                    </div>
                `;
                rankItemList.push(rankItem);
            }

            $("#kindRank").empty();
            $('#kindRank').append(rankItemList.join('\n'));
        }
        function updateProductRank(product) {
            const rankItemList = [];
            for(let i=1;i<Math.min(4,product.length+1);i++) {
                const rankItem  = `
                    <div class="services-item col-md-4">
                        <div class="services-img">
                            <img src="https://m.media-amazon.com/images/I/71knjo3Uz4L._AC_UY436_FMwebp_QL65_.jpg" alt="">
                            <div class="">
                                <img src="" alt="">
                                <h5><a href="#">${product[i-1]["ProductKind"]}</a></h5>
                            </div>
                        </div>
                        <div class="services-text text-center">
                            <h6>0${i}</h6>
                            <h5>${product[i-1]["ProductKind"]}, Gross: ${product[i-1]["P"]}</h5>
                        </div>
                    </div>
                `;
                rankItemList.push(rankItem);
            }
             $("#productRank").empty();
            $('#productRank').append(rankItemList.join('\n'));
        }
        function updateRegionRank(data) {
            const rankItemList = [];
            for(let i=1;i<Math.min(4,data.length+1);i++) {
                const rankItem  = `
                    <div class="services-item col-md-4">
                        <div class="services-img">
                            <img src="images/blog/store-${i}.png" alt="">
                            <div class="">
                                <img src="" alt="">
                                <h5><a href="#">${data[i-1]["Name"]}</a></h5>
                            </div>
                        </div>
                        <div class="services-text text-center">
                            <h6>0${i}</h6>
                            <h5>${data[i-1]["Name"]}, Profit: ${data[i-1]["sum(TotalGrossIncome)"]}</h5>
                        </div>
                    </div>
                `;
                rankItemList.push(rankItem);
            }
            $("#regionRank").empty();
            $('#regionRank').append(rankItemList.join('\n'));
        }
        $(document).ready(function() {
            let url = getUrl('rankByV');
            request(url,{}).then(res=>{
                if(!res || !res.data) {
                    return;
                }
                updateKindRank(res.data);
            });
            url = getUrl('rankByP');
            request(url,{}).then(res=>{
                if(!res || !res.data) {
                    return;
                }
                updateProductRank(res.data);
            });
            url = getUrl('rankByPOR');
            request(url,{}).then(res=>{
                if(!res || !res.data) {
                    return;
                }
                updateRegionRank(res.data);
            });
        });
    </script>

</body>

</html>